<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>
<?import javafx.scene.image.*?>
<?import javafx.geometry.Insets?>

<!-- ä¸»å®¹å™¨ - ä½¿ç”¨BorderPaneå¸ƒå±€ -->
<?import javafx.scene.input.KeyCodeCombination?>
<?import javafx.scene.control.cell.PropertyValueFactory?>
<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.smartfilemanager.controller.MainController"
            stylesheets="@../css/main.css"
            prefWidth="1200" prefHeight="800"
            minWidth="800" minHeight="600">

    <!-- å®šä¹‰ToggleGroup -->
    <fx:define>
        <ToggleGroup fx:id="viewModeGroup"/>
        <ToggleGroup fx:id="searchTypeGroup"/>
    </fx:define>

    <!-- ========== é¡¶éƒ¨åŒºåŸŸï¼šèœå•æ å’Œå·¥å…·æ  ========== -->
    <top>
        <VBox>
            <!-- èœå•æ  -->
            <MenuBar VBox.vgrow="NEVER">
                <!-- æ–‡ä»¶èœå• -->
                <Menu text="æ–‡ä»¶">
                    <MenuItem text="æ–°å»ºè§„åˆ™" onAction="#handleNewRule" accelerator="Ctrl+N">
<!--                        <accelerator>-->
<!--                            <KeyCodeCombination code="N" control="TRUE"/>-->
<!--                        </accelerator>-->
                    </MenuItem>
                    <MenuItem text="å¯¼å…¥è§„åˆ™..." onAction="#handleImportRule"/>
                    <MenuItem text="å¯¼å‡ºè§„åˆ™..." onAction="#handleExportRule"/>
                    <SeparatorMenuItem/>
                    <MenuItem text="è®¾ç½®" onAction="#handleOpenSettings">
<!--                        <accelerator>-->
<!--                            <KeyCodeCombination code="COMMA" control="UP"/>-->
<!--                        </accelerator>-->
                    </MenuItem>
                    <SeparatorMenuItem/>
                    <MenuItem text="é€€å‡º" onAction="#handleExit">
<!--                        <accelerator>-->
<!--                            <KeyCodeCombination code="Q" control="UP"/>-->
<!--                        </accelerator>-->
                    </MenuItem>
                </Menu>

                <!-- ç›‘æŽ§èœå• -->
                <Menu text="ç›‘æŽ§">
                    <MenuItem text="å¼€å§‹ç›‘æŽ§" onAction="#handleStartMonitoring">
<!--                        <accelerator>-->
<!--                            <KeyCodeCombination code="F5"/>-->
<!--                        </accelerator>-->
                    </MenuItem>
                    <MenuItem text="åœæ­¢ç›‘æŽ§" onAction="#handleStopMonitoring"/>
                    <MenuItem text="æ·»åŠ ç›‘æŽ§æ–‡ä»¶å¤¹..." onAction="#handleAddMonitorFolder"/>
                    <SeparatorMenuItem/>
                    <MenuItem text="æ‰‹åŠ¨æ•´ç†" onAction="#handleManualOrganize"/>
                </Menu>

                <!-- å·¥å…·èœå• -->
                <Menu text="å·¥å…·">
                    <MenuItem text="æ™ºèƒ½é‡å‘½å" onAction="#handleSmartRename"/>
                    <MenuItem text="æ‰¹é‡æ ‡ç­¾ç®¡ç†" onAction="#handleBatchTag"/>
                    <MenuItem text="æŸ¥æ‰¾é‡å¤æ–‡ä»¶" onAction="#handleFindDuplicates"/>
                    <SeparatorMenuItem/>
                    <MenuItem text="æ¸…ç†ç¼“å­˜" onAction="#handleClearCache"/>
                    <MenuItem text="æŸ¥çœ‹å­˜å‚¨åˆ†æž" onAction="#handleStorageAnalysis"/>
                </Menu>

                <!-- è§†å›¾èœå• -->
                <Menu text="è§†å›¾">
                    <CheckMenuItem text="æ˜¾ç¤ºçŠ¶æ€æ " selected="true" onAction="#handleToggleStatusBar"/>
                    <CheckMenuItem text="æ˜¾ç¤ºä¾§è¾¹æ " selected="true" onAction="#handleToggleSidebar"/>
                    <SeparatorMenuItem/>
                    <RadioMenuItem text="ç´§å‡‘è§†å›¾" toggleGroup="$viewModeGroup"/>
                    <RadioMenuItem text="è¯¦ç»†è§†å›¾" toggleGroup="$viewModeGroup" selected="true"/>
                    <RadioMenuItem text="å›¾æ ‡è§†å›¾" toggleGroup="$viewModeGroup"/>
                </Menu>

                <!-- å¸®åŠ©èœå• -->
                <Menu text="å¸®åŠ©">
                    <MenuItem text="ç”¨æˆ·æ‰‹å†Œ" onAction="#handleOpenManual"/>
                    <MenuItem text="è§†é¢‘æ•™ç¨‹" onAction="#handleOpenTutorial"/>
                    <SeparatorMenuItem/>
                    <MenuItem text="æ£€æŸ¥æ›´æ–°" onAction="#handleCheckUpdate"/>
                    <SeparatorMenuItem/>
                    <MenuItem text="å…³äºŽ" onAction="#handleShowAbout"/>
                </Menu>
            </MenuBar>

            <!-- å·¥å…·æ  -->
            <ToolBar VBox.vgrow="NEVER" style="-fx-padding: 5;">
                <Button text="å¼€å§‹ç›‘æŽ§" onAction="#handleStartMonitoring" styleClass="primary-button">
                    <graphic>
                        <ImageView fitWidth="16" fitHeight="16">
                            <Image url="@/image/icons/begin.png"/>
                        </ImageView>
                    </graphic>
                </Button>
                <Button text="åœæ­¢ç›‘æŽ§" onAction="#handleStopMonitoring">
                    <graphic>
                        <ImageView fitWidth="16" fitHeight="16">
                            <Image url="@/image/icons/stop.png"/>
                        </ImageView>
                    </graphic>
                </Button>
                <Separator orientation="VERTICAL"/>

                <Button text="æ–°å»ºè§„åˆ™" onAction="#handleNewRule" styleClass="success-button">
                    <graphic>
                        <ImageView fitWidth="16" fitHeight="16">
                            <Image url="@/image/icons/add.png"/>
                        </ImageView>
                    </graphic>
                </Button>
                <Button text="ç¼–è¾‘è§„åˆ™" onAction="#handleEditRule">
                    <graphic>
                        <ImageView fitWidth="16" fitHeight="16">
                            <Image url="@/image/icons/edit.png"/>
                        </ImageView>
                    </graphic>
                </Button>
                <Button text="åˆ é™¤è§„åˆ™" onAction="#handleDeleteRule">
                    <graphic>
                        <ImageView fitWidth="16" fitHeight="16">
                            <Image url="@/image/icons/delete.png"/>
                        </ImageView>
                    </graphic>
                </Button>
                <Separator orientation="VERTICAL"/>

                <Button text="æ™ºèƒ½æœç´¢" onAction="#handleOpenSearch" styleClass="info-button">
                    <graphic>
                        <ImageView fitWidth="16" fitHeight="16">
                            <Image url="@/image/icons/search.png"/>
                        </ImageView>
                    </graphic>
                </Button>
                <Button text="æŸ¥çœ‹æ—¥å¿—" onAction="#handleOpenLogs">
                    <graphic>
                        <ImageView fitWidth="16" fitHeight="16">
                            <Image url="@/image/icons/log.png"/>
                        </ImageView>
                    </graphic>
                </Button>
            </ToolBar>
        </VBox>
    </top>

    <!-- ========== å·¦ä¾§åŒºåŸŸï¼šå¯¼èˆªæ  ========== -->
    <left>
        <VBox prefWidth="220" maxWidth="300" spacing="10" style="-fx-padding: 10;">
            <!-- ç›‘æŽ§çŠ¶æ€å¡ç‰‡ -->
            <VBox styleClass="card" spacing="5">
                <HBox alignment="CENTER_LEFT">
                    <Label text="ðŸ“ ç›‘æŽ§çŠ¶æ€" style="-fx-font-weight: bold;"/>
                    <Region HBox.hgrow="ALWAYS"/>
                    <Label fx:id="monitorStatusLabel" text="å·²åœæ­¢" styleClass="status-label"/>
                </HBox>

                <VBox spacing="5" style="-fx-padding: 5 0 0 0;">
                    <HBox>
                        <Label text="ç›‘æŽ§æ–‡ä»¶å¤¹:"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <Label fx:id="monitorFolderCountLabel" text="0"/>
                    </HBox>
                    <HBox>
                        <Label text="æ´»åŠ¨è§„åˆ™:"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <Label fx:id="activeRuleCountLabel" text="0"/>
                    </HBox>
                    <HBox>
                        <Label text="å·²æ•´ç†æ–‡ä»¶:"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <Label fx:id="organizedFileCountLabel" text="0"/>
                    </HBox>
                </VBox>

                <Button text="ç®¡ç†ç›‘æŽ§æ–‡ä»¶å¤¹" onAction="#handleManageMonitorFolders"
                        style="-fx-max-width: infinity; -fx-margin-top: 5;"/>
            </VBox>

            <!-- å¿«é€Ÿæ“ä½œå¡ç‰‡ -->
            <VBox styleClass="card" spacing="10">
                <Label text="âš¡ å¿«é€Ÿæ“ä½œ" style="-fx-font-weight: bold;"/>

                <VBox spacing="5">
                    <Button text="ðŸ“‚ æ•´ç†æ¡Œé¢" onAction="#handleOrganizeDesktop"
                            style="-fx-max-width: infinity;" styleClass="secondary-button"/>
                    <Button text="ðŸ“¥ æ•´ç†ä¸‹è½½æ–‡ä»¶å¤¹" onAction="#handleOrganizeDownloads"
                            style="-fx-max-width: infinity;" styleClass="secondary-button"/>
                    <Button text="ðŸ” æ™ºèƒ½æœç´¢æ–‡ä»¶" onAction="#handleSmartSearch"
                            style="-fx-max-width: infinity;" styleClass="secondary-button"/>
                    <Button text="ðŸ·ï¸ æ‰¹é‡ç®¡ç†æ ‡ç­¾" onAction="#handleManageTags"
                            style="-fx-max-width: infinity;" styleClass="secondary-button"/>
                </VBox>
            </VBox>

            <!-- æ ‡ç­¾äº‘å¡ç‰‡ -->
            <VBox styleClass="card" spacing="5">
                <HBox alignment="CENTER_LEFT">
                    <Label text="ðŸ·ï¸ çƒ­é—¨æ ‡ç­¾" style="-fx-font-weight: bold;"/>
                    <Region HBox.hgrow="ALWAYS"/>
                    <Button text="ç®¡ç†" onAction="#handleOpenTagManager"
                            style="-fx-font-size: 10; -fx-padding: 2 5;"/>
                </HBox>

                <FlowPane fx:id="tagCloudPane" hgap="5" vgap="5"
                          style="-fx-padding: 5;" prefHeight="150"/>
            </VBox>

            <!-- æ™ºèƒ½æŽ¨èå¡ç‰‡ -->
            <VBox styleClass="card" spacing="5">
                <Label text="ðŸ¤– AIæŽ¨èåŠ©æ‰‹" style="-fx-font-weight: bold;"/>

                <VBox spacing="5" style="-fx-padding: 5 0;">
                    <Label text="å¼€å¯AIæ™ºèƒ½æŽ¨èï¼Œè®©æ–‡ä»¶æ•´ç†æ›´æ™ºèƒ½"
                           style="-fx-font-size: 11; -fx-text-fill: #666;"/>

                    <HBox>
                        <ToggleButton fx:id="aiRecommendationToggle" text="å¼€å¯æŽ¨è"
                                      onAction="#handleToggleAIRecommendation"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <Button text="è®¾ç½®" onAction="#handleAISettings"
                                style="-fx-font-size: 10; -fx-padding: 2 5;"/>
                    </HBox>

                    <ProgressBar fx:id="aiAccuracyProgress" prefWidth="200"
                                 style="-fx-margin-top: 5;" progress="0.75"/>
                    <Label text="æŽ¨èå‡†ç¡®çŽ‡: 75%" style="-fx-font-size: 10;"/>
                </VBox>
            </VBox>
        </VBox>
    </left>

    <!-- ========== ä¸­é—´åŒºåŸŸï¼šä¸»è¦å†…å®¹ ========== -->
    <center>
        <TabPane fx:id="mainTabPane" tabClosingPolicy="UNAVAILABLE">
            <!-- ä»ªè¡¨æ¿æ ‡ç­¾é¡µ -->
            <Tab text="ðŸ“Š ä»ªè¡¨æ¿">
                <ScrollPane fitToWidth="true">
                    <VBox spacing="20" style="-fx-padding: 20;">
                        <!-- æ¬¢è¿Žæ¨ªå¹… -->
                        <HBox styleClass="welcome-banner" alignment="CENTER_LEFT"
                              style="-fx-padding: 20; -fx-background-radius: 10;">
                            <VBox>
                                <Label text="æ™ºèƒ½æ–‡ä»¶ç®¡å®¶" style="-fx-font-size: 24; -fx-font-weight: bold;"/>
                                <Label text="è®©æ–‡ä»¶ç®¡ç†å˜å¾—ç®€å•è€Œæ™ºèƒ½"
                                       style="-fx-font-size: 14; -fx-text-fill: #666;"/>
                            </VBox>
                            <Region HBox.hgrow="ALWAYS"/>
                            <Button text="å¼€å§‹ä½¿ç”¨æŒ‡å—" styleClass="primary-button"
                                    onAction="#handleGetStarted"/>
                        </HBox>

                        <!-- çŠ¶æ€å¡ç‰‡ç½‘æ ¼ -->
                        <GridPane hgap="15" vgap="15">
                            <columnConstraints>
                                <ColumnConstraints percentWidth="25"/>
                                <ColumnConstraints percentWidth="25"/>
                                <ColumnConstraints percentWidth="25"/>
                                <ColumnConstraints percentWidth="25"/>
                            </columnConstraints>

                            <!-- ç›‘æŽ§çŠ¶æ€å¡ç‰‡ -->
                            <VBox styleClass="stat-card" GridPane.columnIndex="0">
                                <Label text="ðŸ“" style="-fx-font-size: 24;"/>
                                <Label fx:id="monitoredFoldersLabel" text="3"
                                       style="-fx-font-size: 28; -fx-font-weight: bold;"/>
                                <Label text="ç›‘æŽ§æ–‡ä»¶å¤¹" style="-fx-text-fill: #666;"/>
                            </VBox>

                            <!-- è§„åˆ™çŠ¶æ€å¡ç‰‡ -->
                            <VBox styleClass="stat-card" GridPane.columnIndex="1">
                                <Label text="âš™ï¸" style="-fx-font-size: 24;"/>
                                <Label fx:id="totalRulesLabel" text="12"
                                       style="-fx-font-size: 28; -fx-font-weight: bold;"/>
                                <Label text="æ´»åŠ¨è§„åˆ™" style="-fx-text-fill: #666;"/>
                            </VBox>

                            <!-- æ–‡ä»¶ç»Ÿè®¡å¡ç‰‡ -->
                            <VBox styleClass="stat-card" GridPane.columnIndex="2">
                                <Label text="ðŸ“„" style="-fx-font-size: 24;"/>
                                <Label fx:id="totalFilesLabel" text="1,245"
                                       style="-fx-font-size: 28; -fx-font-weight: bold;"/>
                                <Label text="å·²æ•´ç†æ–‡ä»¶" style="-fx-text-fill: #666;"/>
                            </VBox>

                            <!-- èŠ‚çœç©ºé—´å¡ç‰‡ -->
                            <VBox styleClass="stat-card" GridPane.columnIndex="3">
                                <Label text="ðŸ’¾" style="-fx-font-size: 24;"/>
                                <Label fx:id="spaceSavedLabel" text="2.4 GB"
                                       style="-fx-font-size: 28; -fx-font-weight: bold;"/>
                                <Label text="èŠ‚çœç©ºé—´" style="-fx-text-fill: #666;"/>
                            </VBox>
                        </GridPane>

                        <!-- æœ€è¿‘æ´»åŠ¨ -->
                        <VBox spacing="10">
                            <HBox alignment="CENTER_LEFT">
                                <Label text="ðŸ“‹ æœ€è¿‘æ´»åŠ¨" style="-fx-font-size: 16; -fx-font-weight: bold;"/>
                                <Region HBox.hgrow="ALWAYS"/>
                                <Button text="æŸ¥çœ‹å…¨éƒ¨" onAction="#handleViewAllActivities"
                                        style="-fx-font-size: 12;"/>
                            </HBox>

                            <TableView fx:id="recentActivitiesTable" prefHeight="200">
                                <columns>
                                    <TableColumn text="æ—¶é—´" prefWidth="120">
                                        <cellValueFactory>
                                            <PropertyValueFactory property="time"/>
                                        </cellValueFactory>
                                    </TableColumn>
                                    <TableColumn text="æ“ä½œ" prefWidth="100">
                                        <cellValueFactory>
                                            <PropertyValueFactory property="operation"/>
                                        </cellValueFactory>
                                    </TableColumn>
                                    <TableColumn text="æ–‡ä»¶" prefWidth="250">
                                        <cellValueFactory>
                                            <PropertyValueFactory property="fileName"/>
                                        </cellValueFactory>
                                    </TableColumn>
                                    <TableColumn text="çŠ¶æ€" prefWidth="80">
                                        <cellValueFactory>
                                            <PropertyValueFactory property="status"/>
                                        </cellValueFactory>
                                    </TableColumn>
                                </columns>
                            </TableView>
                        </VBox>

                        <!-- å¿«é€Ÿå¼€å§‹ -->
                        <VBox spacing="10">
                            <Label text="ðŸš€ å¿«é€Ÿå¼€å§‹" style="-fx-font-size: 16; -fx-font-weight: bold;"/>

                            <GridPane hgap="10" vgap="10">
                                <columnConstraints>
                                    <ColumnConstraints percentWidth="50"/>
                                    <ColumnConstraints percentWidth="50"/>
                                </columnConstraints>

                                <VBox styleClass="quick-start-card" spacing="10">
                                    <Label text="ðŸ“‚ æ·»åŠ ç›‘æŽ§æ–‡ä»¶å¤¹"
                                           style="-fx-font-weight: bold; -fx-font-size: 14;"/>
                                    <Label text="é€‰æ‹©éœ€è¦è‡ªåŠ¨æ•´ç†çš„æ–‡ä»¶å¤¹"
                                           style="-fx-text-fill: #666; -fx-font-size: 12;"/>
                                    <Button text="æ·»åŠ æ–‡ä»¶å¤¹" onAction="#handleAddMonitorFolder"
                                            style="-fx-max-width: infinity;" styleClass="primary-button"/>
                                </VBox>

                                <VBox styleClass="quick-start-card" spacing="10">
                                    <Label text="âš™ï¸ åˆ›å»ºæ•´ç†è§„åˆ™"
                                           style="-fx-font-weight: bold; -fx-font-size: 14;"/>
                                    <Label text="å®šä¹‰æ–‡ä»¶å¦‚ä½•è‡ªåŠ¨åˆ†ç±»å’Œç§»åŠ¨"
                                           style="-fx-text-fill: #666; -fx-font-size: 12;"/>
                                    <Button text="æ–°å»ºè§„åˆ™" onAction="#handleNewRule"
                                            style="-fx-max-width: infinity;" styleClass="primary-button"/>
                                </VBox>
                            </GridPane>
                        </VBox>
                    </VBox>
                </ScrollPane>
            </Tab>

            <!-- è§„åˆ™ç®¡ç†æ ‡ç­¾é¡µ -->
            <Tab text="âš™ï¸ è§„åˆ™ç®¡ç†">
                <VBox spacing="10" style="-fx-padding: 15;">
                    <HBox spacing="10" alignment="CENTER_LEFT">
                        <Label text="æ–‡ä»¶æ•´ç†è§„åˆ™" style="-fx-font-size: 18; -fx-font-weight: bold;"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <TextField fx:id="ruleSearchField" promptText="æœç´¢è§„åˆ™..." prefWidth="200"/>
                        <Button text="æ–°å»ºè§„åˆ™" onAction="#handleNewRule" styleClass="primary-button"/>
                        <Button text="å¯¼å…¥è§„åˆ™" onAction="#handleImportRule"/>
                        <Button text="å¯¼å‡ºè§„åˆ™" onAction="#handleExportRule"/>
                    </HBox>

                    <TableView fx:id="rulesTable" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn text="å¯ç”¨" prefWidth="50">
                                <cellValueFactory>
                                    <PropertyValueFactory property="enabled"/>
                                </cellValueFactory>
                            </TableColumn>
                            <TableColumn text="è§„åˆ™åç§°" prefWidth="150">
                                <cellValueFactory>
                                    <PropertyValueFactory property="name"/>
                                </cellValueFactory>
                            </TableColumn>
                            <TableColumn text="æ¡ä»¶" prefWidth="200">
                                <cellValueFactory>
                                    <PropertyValueFactory property="condition"/>
                                </cellValueFactory>
                            </TableColumn>
                            <TableColumn text="ç›®æ ‡æ–‡ä»¶å¤¹" prefWidth="250">
                                <cellValueFactory>
                                    <PropertyValueFactory property="targetPath"/>
                                </cellValueFactory>
                            </TableColumn>
                            <TableColumn text="ä¼˜å…ˆçº§" prefWidth="60">
                                <cellValueFactory>
                                    <PropertyValueFactory property="priority"/>
                                </cellValueFactory>
                            </TableColumn>
                            <TableColumn text="æ“ä½œ" prefWidth="100">
                                <cellValueFactory>
                                    <PropertyValueFactory property="actions"/>
                                </cellValueFactory>
                            </TableColumn>
                        </columns>
                    </TableView>

                    <HBox spacing="10" alignment="CENTER_RIGHT">
                        <Label text="å…±" fx:id="totalRulesCountLabel" />
                        <Label text="ä¸ªè§„åˆ™"/>
                    </HBox>
                </VBox>
            </Tab>

            <!-- æ–‡ä»¶ç›‘æŽ§æ ‡ç­¾é¡µ -->
            <Tab text="ðŸ‘ï¸ æ–‡ä»¶ç›‘æŽ§">
                <VBox spacing="10" style="-fx-padding: 15;">
                    <HBox spacing="10" alignment="CENTER_LEFT">
                        <Label text="å®žæ—¶æ–‡ä»¶ç›‘æŽ§" style="-fx-font-size: 18; -fx-font-weight: bold;"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <ToggleButton fx:id="monitorToggleButton" text="å¼€å§‹ç›‘æŽ§"
                                      onAction="#handleToggleMonitoring"/>
                        <Button text="æ·»åŠ æ–‡ä»¶å¤¹" onAction="#handleAddMonitorFolder"/>
                        <Button text="æ¸…ç©ºåˆ—è¡¨" onAction="#handleClearMonitorList"/>
                    </HBox>

                    <HBox spacing="10">
                        <VBox spacing="5" prefWidth="300">
                            <Label text="ç›‘æŽ§æ–‡ä»¶å¤¹åˆ—è¡¨" style="-fx-font-weight: bold;"/>
                            <ListView fx:id="monitorFoldersList" VBox.vgrow="ALWAYS"/>
                            <HBox spacing="5">
                                <Button text="æ·»åŠ " onAction="#handleAddMonitorFolder"
                                        style="-fx-max-width: infinity;" HBox.hgrow="ALWAYS"/>
                                <Button text="ç§»é™¤" onAction="#handleRemoveMonitorFolder"
                                        style="-fx-max-width: infinity;" HBox.hgrow="ALWAYS"/>
                            </HBox>
                        </VBox>

                        <VBox spacing="5" VBox.vgrow="ALWAYS">
                            <Label text="æœ€è¿‘æ–‡ä»¶æ´»åŠ¨" style="-fx-font-weight: bold;"/>
                            <TableView fx:id="fileActivitiesTable" VBox.vgrow="ALWAYS">
                                <columns>
                                    <TableColumn text="æ—¶é—´" prefWidth="120"/>
                                    <TableColumn text="äº‹ä»¶" prefWidth="100"/>
                                    <TableColumn text="æ–‡ä»¶" prefWidth="250"/>
                                    <TableColumn text="æ“ä½œ" prefWidth="100"/>
                                </columns>
                            </TableView>
                        </VBox>
                    </HBox>
                </VBox>
            </Tab>

            <!-- æ™ºèƒ½æœç´¢æ ‡ç­¾é¡µ -->
            <Tab text="ðŸ” æ™ºèƒ½æœç´¢">
                <VBox spacing="15" style="-fx-padding: 20;">
                    <!-- æœç´¢æ¡† -->
                    <VBox spacing="10" styleClass="search-box">
                        <HBox spacing="10" alignment="CENTER_LEFT">
                            <TextField fx:id="searchInput" promptText="è¾“å…¥å…³é”®è¯ã€æ ‡ç­¾æˆ–è‡ªç„¶è¯­è¨€æœç´¢..."
                                       style="-fx-pref-width: 400;"/>
                            <Button text="æœç´¢" onAction="#handleSearch" styleClass="primary-button"/>
                            <Button text="é«˜çº§æœç´¢" onAction="#handleAdvancedSearch"/>
                            <Button text="ä¿å­˜æœç´¢" onAction="#handleSaveSearch"/>
                        </HBox>

                        <HBox spacing="20">
                            <VBox spacing="5">
                                <Label text="æœç´¢ç±»åž‹:"/>
<!--                                <ToggleGroup fx:id="searchTypeGroup"/>-->
                                <HBox spacing="10">
                                    <RadioButton text="å…¨éƒ¨" toggleGroup="$searchTypeGroup" selected="true"/>
                                    <RadioButton text="æ ‡ç­¾" toggleGroup="$searchTypeGroup"/>
                                    <RadioButton text="æ–‡ä»¶å" toggleGroup="$searchTypeGroup"/>
                                    <RadioButton text="å†…å®¹" toggleGroup="$searchTypeGroup"/>
                                </HBox>
                            </VBox>

                            <VBox spacing="5">
                                <Label text="æ—¶é—´èŒƒå›´:"/>
                                <ComboBox fx:id="timeRangeCombo" prefWidth="150"/>
                            </VBox>
                        </HBox>
                    </VBox>

                    <!-- æœç´¢ç»“æžœ -->
                    <VBox spacing="10" VBox.vgrow="ALWAYS">
                        <HBox alignment="CENTER_LEFT">
                            <Label text="æœç´¢ç»“æžœ" style="-fx-font-size: 16; -fx-font-weight: bold;"/>
                            <Region HBox.hgrow="ALWAYS"/>
                            <Label fx:id="searchResultCountLabel" text="æ‰¾åˆ° 0 ä¸ªæ–‡ä»¶"/>
                        </HBox>

                        <TableView fx:id="searchResultsTable" VBox.vgrow="ALWAYS">
                            <columns>
                                <TableColumn text="æ–‡ä»¶å" prefWidth="250"/>
                                <TableColumn text="è·¯å¾„" prefWidth="300"/>
                                <TableColumn text="å¤§å°" prefWidth="80"/>
                                <TableColumn text="ä¿®æ”¹æ—¶é—´" prefWidth="120"/>
                                <TableColumn text="æ ‡ç­¾" prefWidth="150"/>
                            </columns>
                        </TableView>
                    </VBox>
                </VBox>
            </Tab>
        </TabPane>
    </center>

    <!-- ========== å³ä¾§åŒºåŸŸï¼šè¯¦æƒ…é¢æ¿ ========== -->
    <right>
        <VBox prefWidth="280" maxWidth="350" spacing="15" style="-fx-padding: 15;">
            <!-- æ–‡ä»¶è¯¦æƒ…å¡ç‰‡ -->
            <VBox styleClass="card" spacing="10">
                <Label text="ðŸ“„ æ–‡ä»¶è¯¦æƒ…" style="-fx-font-weight: bold;"/>

                <VBox spacing="5" fx:id="fileDetailsPane" visible="false">
                    <HBox>
                        <Label text="åç§°:" style="-fx-font-weight: bold; -fx-min-width: 60;"/>
                        <Label fx:id="detailFileName" style="-fx-wrap-text: true;"/>
                    </HBox>
                    <HBox>
                        <Label text="è·¯å¾„:" style="-fx-font-weight: bold; -fx-min-width: 60;"/>
                        <Label fx:id="detailFilePath" style="-fx-wrap-text: true;"/>
                    </HBox>
                    <HBox>
                        <Label text="å¤§å°:" style="-fx-font-weight: bold; -fx-min-width: 60;"/>
                        <Label fx:id="detailFileSize"/>
                    </HBox>
                    <HBox>
                        <Label text="ä¿®æ”¹:" style="-fx-font-weight: bold; -fx-min-width: 60;"/>
                        <Label fx:id="detailFileModified"/>
                    </HBox>
                    <HBox>
                        <Label text="ç±»åž‹:" style="-fx-font-weight: bold; -fx-min-width: 60;"/>
                        <Label fx:id="detailFileType"/>
                    </HBox>

                    <Separator/>

                    <Label text="æ ‡ç­¾:" style="-fx-font-weight: bold;"/>
                    <FlowPane fx:id="detailFileTags" hgap="5" vgap="5"/>

                    <HBox spacing="5">
                        <Button text="æ‰“å¼€æ–‡ä»¶" onAction="#handleOpenFile"
                                style="-fx-max-width: infinity;" HBox.hgrow="ALWAYS"/>
                        <Button text="æ‰“å¼€ä½ç½®" onAction="#handleOpenFileLocation"
                                style="-fx-max-width: infinity;" HBox.hgrow="ALWAYS"/>
                    </HBox>
                </VBox>

                <Label fx:id="noFileSelectedLabel" text="é€‰æ‹©æ–‡ä»¶æŸ¥çœ‹è¯¦æƒ…"
                       style="-fx-text-fill: #999; -fx-font-style: italic;"/>
            </VBox>

            <!-- æ™ºèƒ½æ“ä½œå¡ç‰‡ -->
            <VBox styleClass="card" spacing="10">
                <Label text="ðŸ¤– æ™ºèƒ½æ“ä½œ" style="-fx-font-weight: bold;"/>

                <VBox spacing="5">
                    <Button text="AIæ™ºèƒ½åˆ†ç±»" onAction="#handleAIClassify"
                            style="-fx-max-width: infinity;" styleClass="secondary-button"/>
                    <Label text="è®©AIåˆ†æžæ–‡ä»¶å¹¶æŽ¨èåˆ†ç±»" style="-fx-font-size: 11; -fx-text-fill: #666;"/>

                    <Separator/>

                    <Button text="æ™ºèƒ½é‡å‘½å" onAction="#handleSmartRenameFile"
                            style="-fx-max-width: infinity;" styleClass="secondary-button"/>
                    <Label text="åŸºäºŽè§„åˆ™æ‰¹é‡é‡å‘½å" style="-fx-font-size: 11; -fx-text-fill: #666;"/>

                    <Separator/>

                    <Button text="ç”Ÿæˆæ–‡ä»¶æŠ¥å‘Š" onAction="#handleGenerateFileReport"
                            style="-fx-max-width: infinity;" styleClass="secondary-button"/>
                    <Label text="åˆ›å»ºæ–‡ä»¶ç»Ÿè®¡å’Œåˆ†æžæŠ¥å‘Š" style="-fx-font-size: 11; -fx-text-fill: #666;"/>
                </VBox>
            </VBox>

            <!-- ç³»ç»ŸçŠ¶æ€å¡ç‰‡ -->
            <VBox styleClass="card" spacing="10">
                <Label text="ðŸ“ˆ ç³»ç»ŸçŠ¶æ€" style="-fx-font-weight: bold;"/>

                <VBox spacing="5">
                    <ProgressBar fx:id="cpuUsageBar" progress="0.3" prefWidth="Infinity"/>
                    <HBox>
                        <Label text="CPUä½¿ç”¨:"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <Label fx:id="cpuUsageLabel" text="30%"/>
                    </HBox>

                    <ProgressBar fx:id="memoryUsageBar" progress="0.45" prefWidth="Infinity"/>
                    <HBox>
                        <Label text="å†…å­˜ä½¿ç”¨:"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <Label fx:id="memoryUsageLabel" text="45%"/>
                    </HBox>

                    <ProgressBar fx:id="diskUsageBar" progress="0.65" prefWidth="Infinity"/>
                    <HBox>
                        <Label text="ç£ç›˜ä½¿ç”¨:"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <Label fx:id="diskUsageLabel" text="65%"/>
                    </HBox>
                </VBox>
            </VBox>

            <!-- å¿«é€Ÿæç¤ºå¡ç‰‡ -->
            <VBox styleClass="card" spacing="10">
                <HBox alignment="CENTER_LEFT">
                    <Label text="ðŸ’¡ å¿«é€Ÿæç¤º" style="-fx-font-weight: bold;"/>
                    <Region HBox.hgrow="ALWAYS"/>
                    <Button text="ä¸‹ä¸€ä¸ª" onAction="#handleNextTip"
                            style="-fx-font-size: 10; -fx-padding: 2 5;"/>
                </HBox>

                <VBox spacing="5">
                    <Label fx:id="tipTitle" text="æ™ºèƒ½æ ‡ç­¾ç³»ç»Ÿ"
                           style="-fx-font-weight: bold; -fx-font-size: 13;"/>
                    <Label fx:id="tipContent"
                           text="ä½¿ç”¨AIè‡ªåŠ¨ä¸ºæ–‡ä»¶ç”Ÿæˆæ ‡ç­¾ï¼Œæˆ–æ‰‹åŠ¨æ·»åŠ è‡ªå®šä¹‰æ ‡ç­¾ã€‚æ ‡ç­¾å¯ä»¥å¸®åŠ©æ‚¨æ›´å¿«é€Ÿåœ°æœç´¢å’Œåˆ†ç±»æ–‡ä»¶ã€‚"
                           style="-fx-text-fill: #666; -fx-font-size: 12; -fx-wrap-text: true;"/>
                </VBox>
            </VBox>
        </VBox>
    </right>

    <!-- ========== åº•éƒ¨åŒºåŸŸï¼šçŠ¶æ€æ  ========== -->
    <bottom>
        <HBox styleClass="status-bar" spacing="10" alignment="CENTER_LEFT"
              style="-fx-padding: 5 15;">
            <Label fx:id="statusMessage" text="å°±ç»ª"/>
            <Region HBox.hgrow="ALWAYS"/>

            <HBox spacing="10">
                <Label text="ç›‘æŽ§:"/>
                <Label fx:id="statusMonitorStatus" text="å·²åœæ­¢" styleClass="status-indicator"/>

                <Separator orientation="VERTICAL"/>

                <Label text="æ–‡ä»¶:"/>
                <Label fx:id="statusFileCount" text="0"/>

                <Separator orientation="VERTICAL"/>

                <ProgressIndicator fx:id="statusProgressIndicator" progress="-1"
                                   visible="false" prefWidth="16" prefHeight="16"/>
                <Label fx:id="statusOperation" text=""/>
            </HBox>

            <Region HBox.hgrow="ALWAYS"/>

            <Label text="ç‰ˆæœ¬:"/>
            <Label fx:id="versionLabel" text="v1.0.0"/>
        </HBox>
    </bottom>

</BorderPane>